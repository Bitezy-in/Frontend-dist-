import{r as a,j as e,d as j,a as b,e as N,k as S,b as C,L as y}from"./index-CGAI1unE.js";import v from"./RestaurantCard-D_73uE1u.js";import{F as w,A as T,C as V}from"./Container-CJ2ajp-G.js";import{c as x,S as L}from"./cuisines-0NC-gVQY.js";import{m as E,L as F}from"./proxy-ClAm-aRl.js";import"./capitalizeWords-COkigvu9.js";import"./iconBase-C-KAd6xH.js";import"./index-DXpTgGh4.js";import"./utils-F_wR6dLb.js";import"./index-Bb4qSo10.js";const p=({label:s,checked:t,onChange:r,disabled:n,color:o})=>{const l=t?{green:"bg-green-800",red:"bg-red-700"}[o]:"bg-gray-500";return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:`w-12 h-6 flex items-center rounded-full p-1 cursor-pointer ${l} ${n?"opacity-50 cursor-not-allowed":""}`,onClick:()=>!n&&r(!t),children:e.jsx(E.div,{className:"bg-white w-4 h-4 rounded-full shadow-md",animate:{x:t?24:0}})}),e.jsx(F,{className:"cursor-pointer",onClick:()=>!n&&r(!t),children:s})]})},$=()=>{const[s,t]=a.useState(!1),[r,n]=a.useState(!1),[o,c]=a.useState(x);a.useEffect(()=>{m()},[s,r]);const l=()=>{t(!s),n(!1)},g=()=>{t(!1),n(!r)},m=()=>{c(s&&r?x:s?x.filter(u=>u.type==="veg"):r?x.filter(u=>u.type==="non-veg"):x)};return e.jsxs("div",{className:"mt-14",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"sm:text-xl text-md font-bold text-gray-800 mb-4",children:"Popular Cuisines"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"Veg"}),e.jsx(p,{label:"",onChange:l,checked:s,color:"green"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"Non-Veg"}),e.jsx(p,{label:"",onChange:g,checked:r,color:"red"})]})]})]}),e.jsx(L,{cuisines:o})]})};function k(s,t){const[r,n]=a.useState(s);return a.useEffect(()=>{const o=setTimeout(()=>{n(s)},t);return()=>{clearTimeout(o)}},[s,t]),r}const O=({onSetRestaurants:s,cuisineName:t,onResultName:r,setResultReturned:n})=>{const[o,c]=a.useState(t||""),l=k(o,500),[g,m]=a.useState(!1);console.log(t);const u=j();a.useEffect(()=>{n(!1),l?(h(l),r(l)):(s([]),n(!0),r("")),u(`/search?name=${l}`)},[l]),a.useEffect(()=>{t&&c(t)},[t]);const h=a.useCallback(async f=>{m(!0);try{const{data:d}=await b.get(`/restaurants/search?name=${f}`);d.success&&(s(d.restaurants),r(f),n(!0))}catch(d){d.status===404&&(s([]),n(!0)),console.error(d),N.error(d.response.data.message)}finally{m(!1)}},[l]);return e.jsx("div",{className:"w-full flex justify-center items-center",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{type:"text",placeholder:"Search for restaurants and food",value:o,onChange:f=>c(f.target.value),className:"w-full pl-4 pr-10 py-3 border text-slate-500 font-medium border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-gray-400"}),e.jsx(w,{className:"absolute right-3 top-3 text-gray-500",size:20})]})})},G=()=>{const[s,t]=a.useState([]),[r,n]=a.useState(!1),[o,c]=a.useState(!0),[l]=S(),g=l.get("name"),[m,u]=a.useState(""),[h,f]=a.useState("");a.useEffect(()=>{u(g)},[g]);const d=i=>{f(i)};return e.jsx(e.Fragment,{children:r?e.jsx(C,{}):e.jsx(T,{children:e.jsxs(V,{children:[e.jsx(O,{setResultReturned:c,onSetRestaurants:i=>t(i),cuisineName:m,onResultName:d}),e.jsx($,{}),h&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold text-lg underline",children:["Results for ",h," in Restaurants"]}),e.jsx("div",{className:"mt-5 grid lg:grid-cols-3 md:grid-cols-2 sm:grid-cols-1 grid-cols-1 sm:gap-8 gap-4",children:(s==null?void 0:s.length)>0?s==null?void 0:s.map(i=>e.jsx(y,{to:`/restaurant/${i._id}`,children:e.jsx(v,{restaurant:i})},i==null?void 0:i._id)):o&&e.jsx("div",{className:"font-bold text-xl",children:"No Restaurant found!!"})})]})]})})})};export{G as default};
